# قابلیت‌های اصلی فرانت‌اند سیستم تشخیص تومور مغزی

## 1. صفحه اصلی (Landing Page) - `frontend/src/app/page.tsx`
- معرفی سیستم "تشخیص هوشمند تومور مغزی با هوش مصنوعی".
- قابلیت بارگذاری تصویر MRI توسط کاربر (بدون نیاز به ورود).
    - انتخاب فایل تصویر (JPG, PNG, JPEG).
    - نمایش پیش‌نمایش تصویر.
    - امکان حذف تصویر.
- شبیه‌سازی آنالیز تصویر (با نمایش وضعیت "در حال آنالیز..." و پیام موفقیت).
- نمایش ویژگی‌های کلیدی سیستم (هوش مصنوعی پیشرفته، دقت بالا، رابط کاربری آسان، امنیت داده‌ها).
- لینک به صفحه "درباره سیستم" (`/about`).

## 2. احراز هویت کاربران
- **صفحه ورود (Login) - `frontend/src/app/login/page.tsx`**
    - فرم ورود با فیلدهای نام کاربری و رمز عبور.
    - اعتبارسنجی فرم (حداقل طول کاراکتر).
    - قابلیت نمایش/مخفی کردن رمز عبور.
    - پردازش ورود:
        - نمایش پیام خطا در صورت ناموفق بودن.
        - نمایش پیام موفقیت و هدایت به داشبورد مربوطه بر اساس نقش کاربر (admin, doctor, patient).
    - لینک به صفحه ثبت نام (`/register`).
    - لینک به صفحه "فراموشی رمز عبور" (`/forgot-password`).
- **صفحه ثبت نام (Register) - `frontend/src/app/register/page.tsx`**
    - فرم ثبت نام شامل: نام کاربری، ایمیل، رمز عبور، تکرار رمز عبور، انتخاب نقش (بیمار/پزشک).
    - اعتبارسنجی فرم (تطابق رمزها، فرمت ایمیل، حداقل طول).
    - پردازش ثبت نام:
        - نمایش پیام خطا در صورت بروز مشکل.
        - هدایت به داشبورد (یا صفحه تکمیل اطلاعات برای پزشک) پس از موفقیت.
    - لینک به صفحه ورود.
- **مدیریت وضعیت احراز هویت:**
    - استفاده از `AuthContext` (`frontend/src/context/AuthContext.tsx`) برای نگهداری و دسترسی به اطلاعات کاربر و وضعیت احراز هویت در سراسر برنامه.
    - کامپوننت `ProtectedRoute` (`frontend/src/components/auth/ProtectedRoute.tsx`) برای محافظت از مسیرها و اعمال محدودیت دسترسی بر اساس نقش و وضعیت لاگین کاربر.
- **فراموشی رمز عبور:** (لینک در صفحه ورود وجود دارد، اما خود صفحه و عملکرد آن بررسی نشده است).

## 3. داشبورد ادمین - `frontend/src/app/dashboard/admin/`
- **صفحه اصلی داشبورد ادمین - `page.tsx`**
    - بررسی دسترسی (فقط نقش `admin`).
    - نمایش آمار کلی سیستم (کاربران کل/فعال/نقش، اسکن‌ها کل/امروز/نوع، دقت تشخیص، اسکن‌های در انتظار). (بخش زیادی با داده Mock)
    - کارت‌های خلاصه وضعیت با آیکون و درصد تغییر.
    - لینک‌های ناوبری (دکمه) به بخش‌های مدیریتی:
        - مدیریت کاربران (`./users`)
        - مدیریت پزشکان (`./doctors`)
        - آمار و گزارشات (`./statistics`)
        - تنظیمات سیستم (`./settings`)
        - مدیریت دسترسی‌ها (`./permissions`)
    - قابلیت خروج از حساب کاربری.
- **مدیریت کاربران - `users/page.tsx`**
    - نمایش لیست تمام کاربران سیستم (نام کاربری، ایمیل، نام کامل، نقش، وضعیت، تاریخ ایجاد، تلفن، آخرین ورود). (با داده Mock)
    - جستجو در کاربران (نام، ایمیل، نام کامل، تلفن).
    - فیلتر کاربران بر اساس نقش و وضعیت.
    - عملیات: افزودن کاربر جدید (مودال)، ویرایش کاربر (مودال)، حذف کاربر (با تأیید).
- **مدیریت پزشکان - `doctors/`**
    - **پزشکان در انتظار تأیید - `pending/page.tsx`**
        - نمایش لیست پزشکانی که اطلاعات تکمیلی خود را ثبت کرده و منتظر تأیید ادمین هستند (نام، تخصص، شماره پروانه، بیمارستان، سابقه و...). (از API)
        - قابلیت تأیید یا رد درخواست ثبت‌نام پزشک.
- **آمار و گزارشات - `statistics/page.tsx`**
    - نمایش آمارهای دقیق‌تر سیستم با استفاده از نمودارها (با داده Mock):
        - کارت‌های آمار کلی (تعداد کاربران، بیماران، پزشکان، اسکن‌ها، تشخیص‌ها، نرخ دقت).
        - فیلتر بر اساس بازه زمانی (هفته، ماه، سال) و نوع آمار (اسکن، کاربر، تشخیص).
        - نمودار میله‌ای برای نمایش روند در بازه زمانی.
        - نمودارهای دایره‌ای برای توزیع تشخیص‌ها و نقش کاربران.
    - قابلیت "دریافت گزارش" (عملکرد دقیق مشخص نیست).
- **تنظیمات سیستم - `settings/page.tsx`**
    - رابط تب-بندی شده برای بخش‌های مختلف تنظیمات (با مقادیر اولیه، بدون ذخیره واقعی):
        - **عمومی:** نام سایت، توضیحات، حالت تعمیر و نگهداری.
        - **هوش مصنوعی:** مدل AI، آستانه اطمینان، به‌روزرسانی خودکار مدل.
        - **امنیتی:** زمان وقفه نشست، محدودیت ورود ناموفق، الزام رمز قوی، احراز هویت دو عاملی.
        - **ایمیل:** تنظیمات سرور SMTP.
        - **پشتیبان‌گیری:** فرکانس، دوره نگهداری، محل ذخیره.
    - دکمه "ذخیره تنظیمات".
- **مدیریت دسترسی‌ها و نقش‌ها - `permissions/page.tsx`**
    - نمایش و مدیریت نقش‌های کاربری (مدیر کل، پزشک، بیمار و نقش‌های سفارشی). (با داده Mock)
    - برای هر نقش: نام، توضیحات، تعداد کاربران.
    - عملیات: افزودن نقش جدید (با انتخاب دسترسی‌ها)، ویرایش نقش (نام، توضیحات، دسترسی‌ها - برای نقش‌های غیر سیستمی)، حذف نقش (غیر سیستمی).
    - نمایش لیست دسترسی‌های (Permissions) موجود در سیستم، گروه‌بندی شده بر اساس ماژول (کاربران، تشخیص، بیماران، گزارش‌ها).
    - امکان انتخاب/لغو انتخاب دسترسی‌ها برای هر نقش در مودال.

## 4. داشبورد پزشک - `frontend/src/app/dashboard/doctor/`
- **صفحه اصلی داشبورد پزشک - `page.tsx`**
    - بررسی دسترسی (نقش `doctor` یا `admin`).
    - نمایش نام پزشک لاگین کرده.
    - کارت‌های خلاصه وضعیت: نوبت‌های آتی، اسکن‌های در انتظار تشخیص، تعداد بیماران فعال. (با داده Mock)
    - بخش نوتیفیکیشن‌ها (با قابلیت باز شدن پنل): نمایش نوتیفیکیشن‌های مربوط به اسکن جدید، یادآوری نوبت، پیام جدید، ارتقاء سیستم. (با داده Mock)
    - لیست اسکن‌های در انتظار تشخیص (نام بیمار، تاریخ، پیش‌بینی AI، اطمینان) با لینک به صفحه تشخیص. (با داده Mock)
    - لیست نوبت‌های آتی (نام بیمار، تاریخ، زمان، نوع) با لینک به مدیریت نوبت‌ها. (با داده Mock)
    - لیست بیماران اختصاص یافته به پزشک با قابلیت جستجو (نام، شناسه) و فیلتر (همه، در انتظار تشخیص، اخیراً فعال). (با داده Mock)
        - برای هر بیمار: نام، تاریخ آخرین اسکن، تعداد اسکن‌ها.
        - لینک به پرونده بیمار و ثبت تشخیص جدید.
    - دکمه‌های میانبر: برنامه کاری، پروفایل، افزودن بیمار جدید.
    - قابلیت خروج.
- **تکمیل اطلاعات پزشک (پس از ثبت نام اولیه) - `registration/page.tsx`**
    - فرم برای پزشکانی که تازه با نقش "پزشک" ثبت نام کرده‌اند تا اطلاعات تخصصی خود را وارد کنند:
        - فیلدها: نام، نام خانوادگی، تخصص، شماره پروانه (اجباری).
        - فیلدهای اختیاری: بیمارستان، سابقه، اطلاعات تماس، تحصیلات، بورد، عضویت‌ها و...
    - پس از ثبت موفق، هدایت به صفحه "در انتظار تأیید".
- **صفحه در انتظار تأیید حساب پزشک - `waiting-approval/page.tsx`**
    - نمایش وضعیت حساب پزشک (در انتظار تأیید ادمین / رد شده).
    - راهنمایی برای مراحل بعدی بر اساس وضعیت.
    - دکمه خروج و تماس با پشتیبانی.
    - اگر پزشک تأیید شده باشد، خودکار به داشبورد پزشک هدایت می‌شود.
- **مدیریت نوبت‌های ویزیت - `appointments/page.tsx`**
    - نمایش تقویم ساده (انتخابگر تاریخ) برای مشاهده نوبت‌های روزانه. (با داده Mock)
    - لیست نوبت‌های روز انتخاب شده: نام بیمار، زمان، مدت، نوع (حضوری، تصویری، تلفنی)، وضعیت (رزرو شده، تکمیل، لغو، عدم حضور)، یادداشت‌ها.
    - فیلتر نوبت‌ها (نام بیمار، وضعیت، نوع).
    - عملیات روی نوبت: مشاهده جزئیات، ویرایش (وضعیت، یادداشت)، حذف.
    - لینک به "تنظیم ساعات کاری" و "ثبت نوبت جدید".
- **مدیریت برنامه کاری (ساعات قابل دسترس) - `schedule/page.tsx`**
    - تعریف و ویرایش بازه‌های زمانی (Time Slots) برای برنامه هفتگی پزشک. (با داده Mock)
    - برای هر بازه: روز هفته، ساعت شروع، ساعت پایان، وضعیت (فعال/غیرفعال).
    - افزودن، ویرایش، حذف بازه‌های زمانی.
    - دکمه "ذخیره برنامه".
- **لیست بیماران پزشک - `patients/page.tsx`**
    - نمایش لیست کامل‌تر بیماران اختصاص یافته به پزشک. (از API)
    - اطلاعات هر بیمار: نام، تاریخ تولد، تماس، ایمیل، تاریخ آخرین اسکن، پیش‌بینی آخر، تعداد اسکن.
    - جستجو (نام، تماس، ایمیل)، فیلتر (پیش‌بینی)، مرتب‌سازی (نام، آخرین اسکن).
    - لینک به "مشاهده پرونده" برای هر بیمار.
- **افزودن بیمار جدید توسط پزشک - `new-patient/page.tsx`**
    - فرم کامل برای ثبت اطلاعات بیمار جدید توسط پزشک:
        - اطلاعات پایه: نام، کد ملی، سن، جنسیت، تلفن، ایمیل.
        - اطلاعات تکمیلی: آدرس، سابقه پزشکی، تماس اضطراری، بیمه، گروه خونی، آلرژی‌ها، داروها.
        - سابقه خاص (چک‌باکس): دیابت، بیماری قلبی، سابقه تومور خانواده، سرطان قبلی، سیگار.
    - پس از ثبت موفق، هدایت به داشبورد پزشک.
- **مشاهده پرونده بیمار - `patient/[patientId]/page.tsx`**
    - نمایش جامع اطلاعات بیمار انتخاب شده با تب‌های مختلف: (از API، با بخش Mock)
        - **نمای کلی:** اطلاعات بیمار، آخرین علائم حیاتی، خلاصه سوابق پزشکی.
        - **سوابق پزشکی:** نمایش کامل سوابق.
        - **علائم حیاتی:** لیست علائم حیاتی ثبت شده.
        - **اسکن‌ها:** لیست اسکن‌های MRI بیمار با جزئیات (تصویر کوچک، تاریخ، پیش‌بینی AI، تشخیص پزشک). دکمه "ثبت/ویرایش تشخیص" برای هر اسکن.
        - **تشخیص (تب جداگانه پس از انتخاب اسکن):** کامپوننت `DoctorDiagnosisForm` برای ورود تشخیص پزشک و بازخورد به AI.
- **ثبت/ویرایش تشخیص برای اسکن - `diagnose/[scanId]/page.tsx`**
    - نمایش تصویر اسکن انتخاب شده و اطلاعات آن (بیمار، تاریخ، پیش‌بینی AI). (از API)
    - فرم برای پزشک جهت وارد کردن تشخیص، یادداشت و تأیید/رد تشخیص AI.
    - ذخیره تشخیص و هدایت به لیست بیماران.
- **پروفایل پزشک - `profile/page.tsx`**
    - فرم ویرایش اطلاعات شخصی و تخصصی پزشک: نام، نام خانوادگی، ایمیل، تخصص، شماره نظام، سابقه، بیمارستان، تماس، آدرس، بیوگرافی، تحصیلات. (با داده Mock)
    - قابلیت بارگذاری/تغییر تصویر پروفایل.
    - فرم تغییر رمز عبور (رمز فعلی، جدید، تکرار جدید).
    - دکمه خروج.

## 5. داشبورد بیمار - `frontend/src/app/dashboard/patient/`
- **صفحه اصلی داشبورد بیمار - `page.tsx`**
    - بررسی دسترسی (نقش `patient`).
    - تب‌های مختلف برای مدیریت اطلاعات سلامتی: (بخش زیادی با داده Mock)
        - **نمای کلی:** خلاصه اطلاعات (آخرین اسکن، پزشک معالج، نوبت آتی، یادآورها).
        - **سوابق پزشکی:** نمایش کامل سوابق با قابلیت ویرایش.
        - **علائم حیاتی:** نمایش و (احتمالاً) افزودن علائم.
        - **اسکن‌ها:** لیست اسکن‌ها با جزئیات، دکمه "بارگذاری اسکن جدید" (باز کردن مودال `UploadScanForm`).
        - **نوبت‌ها:** (محتوا در کد اولیه ناقص بود، احتمالاً لیست نوبت‌ها و مدیریت آن‌ها).
    - بخش پزشک معالج: نمایش اطلاعات پزشک فعلی، دکمه "تغییر/انتخاب پزشک" (لینک به `./select-doctor`).
    - بخش یادآورها: لیست یادآورها (دارو، نوبت، آزمایش) با امکان تکمیل.
    - قابلیت خروج.
- **انتخاب/تغییر پزشک معالج - `select-doctor/page.tsx`**
    - نمایش پزشک معالج فعلی (اگر وجود داشته باشد). (از API)
    - لیست پزشکان تأیید شده سیستم با قابلیت جستجو (نام، تخصص، بیمارستان). (از API)
    - دکمه "انتخاب این پزشک" برای هر پزشک در لیست.
    - پس از انتخاب موفق، هدایت به داشبورد بیمار.
- **تاریخچه و جزئیات اسکن‌های بیمار - `history/page.tsx`**
    - نمایش لیستی از تمام اسکن‌های بیمار (Timeline view). (از API، با fallback به Mock)
    - برای هر اسکن: تاریخ، مدل AI، پیش‌بینی، احتمال، نوع تومور، یادداشت پزشک، تصویر MRI.
    - قابلیت افزودن/ویرایش "یادداشت بیمار" برای هر اسکن.
- **پروفایل بیمار - `profile/page.tsx`**
    - فرم ویرایش اطلاعات شخصی بیمار: نام، نام خانوادگی، ایمیل، تاریخ تولد، جنسیت، تلفن، آدرس، سابقه پزشکی کلی. (با داده Mock)
    - قابلیت بارگذاری/تغییر تصویر پروفایل.
    - فرم تغییر رمز عبور.
    - دکمه خروج.
- **بارگذاری اسکن جدید:** (عموماً از طریق مودال `UploadScanForm` در صفحه اصلی داشبورد بیمار)
    - فیلدهای: انتخاب فایل تصویر، تاریخ اسکن، توضیحات.
    - پس از آپلود، نمایش نتیجه اولیه از سرور (پیش‌بینی و اطمینان).

## 6. کامپوننت‌های عمومی و ابزارها
- **کامپوننت‌های UI عمومی (`@/components/ui`):**
    - `AnimatedContainer`, `Button`, `Card`, `Heading`, `Divider`, `PersianLayout`, `JalaliDate` و ...
- **فرم‌ها (`@/components/forms`):**
    - `DoctorDiagnosisForm`, `UploadScanForm`.
- **نمودارها (`@/components/charts`):**
    - `PersianLineChart`, `PersianBarChart`, `PersianDoughnutChart`.
- **مدیریت وضعیت (State Management):**
    - `AuthContext` برای احراز هویت.
    - استفاده از `useState` و `useEffect` برای وضعیت محلی کامپوننت‌ها.
- **اعتبارسنجی فرم:**
    - `react-hook-form` و `zod`.
- **انیمیشن:**
    - `framer-motion`.
- **آیکون‌ها:**
    - `react-icons`.
- **کتابخانه نوتیفیکیشن:**
    - `showToast` از `@/lib/toast`.
- **ابزارهای کمکی (`@/lib`):**
    - `api.ts` (شامل `adminAPI`, `statsAPI`, `doctorAPI`, `patientAPI`, `scanAPI` برای تعامل با بک‌اند - فعلاً بیشتر Mock).
    - `mockImages.ts`.

---


